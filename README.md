# FinTrack — Программа для отслеживания личных финансов и проверки счетов

[![Java 17](https://img.shields.io/badge/Java-17-red?logo=openjdk)](https://openjdk.org/)
[![Весенняя загрузка 3.3](https://img.shields.io/badge/Spring_Boot-3.3-brightgreen?logo=springboot)](https://spring.io/projects/spring-boot)
[![PostgreSQL](https://img.shields.io/badge/PostgreSQL-15-blue?logo=postgresql)](https://www.postgresql.org/)
[![JWT](https://img.shields.io/badge/JWT-Authentication-black)](https://jwt.io/)
[![Структура карты](https://img.shields.io/badge/MapStruct-1.5-orange)](https://mapstruct.org/)
[![Ломбок](https://img.shields.io/badge/Lombok-1.18.34-yellow)](https://projectlombok.org/)

**Financery** — современное веб-приложение для личных финансов с гибкой системой тегов, отслеживанием транзакций и экспортом в Excel. Создано как чистый, безопасный и хорошо протестированный монолит Spring Boot 3.

## Особенности

### Интеллектуальная система тегирования
- Полностью пользовательские теги (без предустановленных категорий)
- Неограниченное количество тегов для каждой транзакции / счета
- Быстрый поиск и фильтрация по любой комбинации тегов

### Управление транзакциями
- Полная информация о транзакциях доходов и расходов
- Расширенный поиск с разбивкой по страницам
- Фильтрация по тегам, диапазону дат, количеству, типу
- Экспорт любого отфильтрованного представления в Excel (Apache POI)

### Безопасность и пользователи
- Регистрация и логин
- Аутентификация на основе JWT
- Все данные строго разделены для каждого пользователя
- Безопасное хранение паролей (Spring Security + BCrypt)
- Конечная точка смены пароля

### Инструменты разработчика и администратора
- Счетчик посещений (для анализа целевой страницы)
- Просмотр журнала сервера в режиме реального времени (только для администратора)
- Система асинхронного ведения журнала
- Глобальная обработка исключений с подробными ответами на ошибки

### Качество и тестирование
- 100%-ный охват всех сервисов модульными тестами
- Картографы MapStruct для чистого преобразования объектов в DTO ↔
- Правильная многоуровневая архитектура

## Технический стек

### Серверная часть (Java 17 + Spring Boot 3.3.4)
- **Фреймворк**: Spring Boot 3 + Spring Web MVC
- **Безопасность **: Spring Security + JWT
- **Данные**: Spring Data JPA (спящий режим)
- **База данных**: PostgreSQL (рабочая среда), H2 (тесты)
- **Отображение**: MapStruct + Lombok
- ** Экспорт в Excel**: Apache POI
- **Проверка**: Bean-проверка (Джакарта)
- **Тестирование **: JUnit 5 + Mockito + Весенний тест

## Структура проекта
```
src/main/java/com/example/financery/
├── контроллер/ # ОСТАЛЬНЫЕ контроллеры (6)
├── dto/ # DTO запросов/ответов
├── exception/ # Пользовательские исключения + GlobalExceptionHandler
├── mapper/ # Средства отображения структуры карты
├── model/ # Объекты JPA (пользователь, транзакция, тег, счет)
├── репозиторий/ # Интерфейсы JpaRepository
├── сервис/
│ └── impl/ # Вся бизнес-логика
├── безопасность/ # SecurityUtil (текущий пользователь)
└── FinanceryApplication.java
```

### Сущности
- `Пользователь` → `Транзакция` (OneToMany)
- `Пользователь` → `Тег` (OneToMany)
- `Пользователь` → `Счет` (OneToMany)
- `Транзакция` ↔ `Тег` (ManyToMany)
- `Счет" ↔ "Тег" (ManyToMany)

## Быстрый старт

### Предварительные условия
- Java 17+
- Maven 3.8+
- PostgreSQL 15+ (или используйте H2 для тестирования)

## Документация по API (ключевые конечные точки)

### Аутентификация
- `POST /api/users/register`
- `POST /api/users/login`
- `POST /api/users/change-password`
- `ПОЛУЧИТЬ /api/users/me`

### Транзакции
- "ПОЛУЧИТЬ /api/транзакции" + фильтры и разбивка на страницы
- `ПОЛУЧИТЬ /api/транзакции/поиск?ключевое слово=...`
- `ОПУБЛИКОВАТЬ /api/транзакции`
- `ПОМЕСТИТЬ /api/транзакции/{id}"
- `УДАЛИТЬ /api/транзакции/{id}`
- `ПОЛУЧИТЬ /api/транзакции/экспорт/excel`

### Теги
- `ПОЛУЧИТЬ /api/теги`
- `ОПУБЛИКОВАТЬ /api/теги`
- `ПОМЕСТИТЬ /api/теги/{id}`
- `УДАЛИТЬ /api/теги/{id}`

### Счета (квитанции)
- `ОПУБЛИКОВАТЬ /api/счета/загрузить` → загрузить несколько фотографий
- `ПОЛУЧИТЬ /api/счета/{id}/фото" → просмотреть изображение квитанции
- `ПОЛУЧИТЬ /api/счета`
- `УДАЛИТЬ /api/счета/{id}`

### Утилиты
- `ПОЛУЧИТЬ /api/посещения" → счетчик посещений
- `ОПУБЛИКОВАТЬ /api/посещения` → счетчик увеличения
- `ПОЛУЧИТЬ /api/журналы?строк=200" → просмотр журналов только для администратора

Для всех защищенных конечных точек требуется "Авторизация: предъявитель <jwt>"

Все реализации сервиса полностью охвачены модульным тестированием.

## Внесение вклада
1. Разветвите репозиторий
2. Создайте свою функциональную ветвь ("git checkout -b feature/cool-thing").
3. Зафиксируйте ("git commit -m "Добавляет классную вещь")
4. Нажмите и откройте запрос на удаление

## Лицензия
Этот проект предназначен для личного использования и использования в образовательных целях.

## Будущие идеи
- [ ] Интеграция распознавания текста для автоматического анализа счетов
- [ ] Повторяющиеся транзакции
- [ ] Планирование бюджета и цели
- [ ] Панель мониторинга графиков и аналитики
- [ ] Мобильное приложение (React Native / Flutter)
- [ ] Поддержка нескольких валют
- [ ] Облачное хранилище фотографий (S3)

Сделано с ❤️ от MAKSIM — просто, понятно и действительно работает.
